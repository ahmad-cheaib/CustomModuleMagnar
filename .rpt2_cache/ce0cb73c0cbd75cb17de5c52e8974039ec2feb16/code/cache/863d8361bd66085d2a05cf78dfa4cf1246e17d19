{"code":"import { __decorate, __metadata } from \"tslib\";\r\nimport { Component, Input, Output, ViewChild } from '@angular/core';\r\nimport { EventEmitter } from '@angular/core';\r\nimport { StorageSessionService } from 'src/app/service/storageSession.service';\r\nimport { UtilityService } from '../../service/utility.service';\r\nlet FileUploaderButtonComponent = class FileUploaderButtonComponent {\r\n    constructor(storageSessionService, utilityService) {\r\n        this.storageSessionService = storageSessionService;\r\n        this.utilityService = utilityService;\r\n        this.uploadedLock = false;\r\n        this.downloadFile = new EventEmitter();\r\n        this.acceptFileTypes = '.*';\r\n        this.isUploadDisabled = true;\r\n        this.isUploading = false;\r\n    }\r\n    ngOnInit() {\r\n    }\r\n    fileClick() {\r\n        if (!this.fileData) {\r\n            this.downloadFile.emit('');\r\n        }\r\n    }\r\n    onSelectFile(event) {\r\n        if (event.files !== undefined) {\r\n            this.fileData = event.files[0];\r\n            this.fileType = event.files[0].type;\r\n            this.fileName = event.files[0].name;\r\n            this.fileInputElement.files = [];\r\n            this.uploadedLock = true;\r\n            this.isUploadDisabled = false;\r\n        }\r\n    }\r\n    onCancelUpload() {\r\n        this.fileInputElement.files = [];\r\n        this.fileData = null;\r\n        this.fileType = null;\r\n        this.fileName = null;\r\n        this.loadingObservable.unsubscribe();\r\n        this.uploadedLock = false;\r\n        this.isUploading = false;\r\n    }\r\n    deleteUploadedFile() {\r\n        this.fileInputElement.files = [];\r\n        this.fileData = null;\r\n        this.fileType = null;\r\n        this.fileName = null;\r\n        this.uploadedLock = false;\r\n        this.isUploadDisabled = true;\r\n    }\r\n    upload() {\r\n        this.fileGuid = undefined;\r\n        const formData = new FormData();\r\n        this.isUploading = true;\r\n        this.isUploadDisabled = true;\r\n        formData.append('data', this.fileData);\r\n        this.loadingObservable = this.storageSessionService.addsessionData(formData).subscribe(res => {\r\n            this.uploadedLock = false;\r\n            this.isUploading = false;\r\n            this.isUploadDisabled = true;\r\n            if (!this.fileGuid) {\r\n                this.fileGuid = res;\r\n                this.utilityService.showSuccess();\r\n            }\r\n        }, error => {\r\n            this.uploadedLock = true;\r\n            this.isUploading = false;\r\n            this.isUploadDisabled = false;\r\n        });\r\n    }\r\n    reset() {\r\n        this.fileName = undefined;\r\n        this.fileType = undefined;\r\n        this.fileGuid = undefined;\r\n        this.uploadedLock = false;\r\n        this.isUploading = false;\r\n        this.isUploadDisabled = true;\r\n    }\r\n    resetFileData() {\r\n        this.fileData = undefined;\r\n    }\r\n};\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", Object)\r\n], FileUploaderButtonComponent.prototype, \"downloadFile\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], FileUploaderButtonComponent.prototype, \"acceptFileTypes\", void 0);\r\n__decorate([\r\n    ViewChild(\"file\"),\r\n    __metadata(\"design:type\", Object)\r\n], FileUploaderButtonComponent.prototype, \"fileInputElement\", void 0);\r\nFileUploaderButtonComponent = __decorate([\r\n    Component({\r\n        selector: 'app-file-uploader-button',\r\n        template: `<div class=\"all-attach-comp\" style=\"display: flex; justify-content: start; flex-direction: row;\">\r\n        \r\n<div>\r\n            <label class=\"form-label\">{{'Attachment' |\r\n                translate}}</label>\r\n            \r\n\r\n                <p-fileUpload class=\"pfileatt-attach\" #file id=\"file\" name=\"file\" mode=\"basic\" [showUploadButton]=\"false\" \r\n                [showCancelButton]=\"false\" (onSelect)=\"onSelectFile($event)\" \r\n                    [accept]=\"acceptFileTypes\"\r\n                     chooseLabel=\"{{'plugin.choose' | translate}}\">\r\n                </p-fileUpload>\r\n        <button class=\"pupload-attach p-button-custom btn btn-lg btn-primary btn-block btn-save\" type=\"button\"\r\n            [disabled]=\"isUploadDisabled \"\r\n            (click)='upload()'><i class='fa fa-upload'></i>&nbsp;{{'Upload' | translate}}\r\n        </button> \r\n                <button *ngIf=\"fileData && fileData.name && isUploading\" (click)=\"onCancelUpload()\" class=\"pcancel-attach p-button-custom btn btn-lg btn-primary btn-block btn-save\">\r\n                    <i class=\"fa fa-close\"></i>Cancel\r\n                </button>\r\n            </div>\r\n</div>\r\n\r\n<div> \r\n    <div class=\"list-upload-file\" *ngIf=\"fileName\">\r\n        <img class=\"img-upload\" src=\"assets/images/Iconionic-md-document.png\">\r\n        <a class=\"list-title\" (click)=\"fileClick()\" style=\"overflow: hidden; width: 80%;\">{{fileName}}</a>\r\n        <button   (click)=\"deleteUploadedFile()\" class=\"list-delete ui-button-info invite_btn p-button p-component p-button-icon-only\">\r\n            <i class=\"fa fa-close\"></i>\r\n        </button>\r\n\r\n    </div>\r\n</div>`,\r\n        styles: [`.p-button-custom{\r\n    font-size: 1.3rem;\r\n    width: 120px;\r\n    height: 31px;\r\n}`]\r\n    }),\r\n    __metadata(\"design:paramtypes\", [StorageSessionService,\r\n        UtilityService])\r\n], FileUploaderButtonComponent);\r\nexport { FileUploaderButtonComponent };\r\n//# sourceMappingURL=file-uploader-button.component.js.map","map":{"version":3,"file":"file-uploader-button.component.js","sourceRoot":"","sources":["../../../src/app/helpers/file-uploader-button/file-uploader-button.component.ts"],"names":[],"mappings":"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"}}
