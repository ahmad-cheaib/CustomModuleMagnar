{"code":"import { __decorate, __metadata } from \"tslib\";\r\nimport { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { UtilityService } from './utility.service';\r\nimport { catchError, finalize } from 'rxjs/operators';\r\nimport { NgProgress } from '@ngx-progressbar/core';\r\nimport { ConfigurationService } from './configuration.service';\r\nlet LeaveTransactionsService = class LeaveTransactionsService {\r\n    constructor(http, utilityService, ngProgress, configurationService) {\r\n        this.http = http;\r\n        this.utilityService = utilityService;\r\n        this.ngProgress = ngProgress;\r\n        this.configurationService = configurationService;\r\n        this.url = this.configurationService.baseUrl + '/api/LeaveTransaction';\r\n    }\r\n    getAllLeaveTransactions(companyId, employeeId, fromYear, toYear, fromMonth, toMonth) {\r\n        const fragment = employeeId ? `&employeeId=${employeeId}` : '';\r\n        return this.http\r\n            .get(`${this.url}/GetLeaveTransactions?companyId=${companyId}\r\n\t\t\t${fragment}\r\n\t\t\t&fromYear=${fromYear}&toYear=${toYear}&fromMonth=${fromMonth}&toMonth=${toMonth}`)\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    getLeaveTransactionsInRange(companyId, startDate, endDate, depIDs) {\r\n        return this.http\r\n            .get(`${this.url}/GetLeaveTransactionsInRange?companyId=${companyId}\r\n\t\t\t&startDate=${startDate}&endDate=${endDate}&depIDs=${depIDs}`)\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    exportToExcel(companyId, employeeId, fromYear, toYear, fromMonth, toMonth) {\r\n        return this.http.get(this.url +\r\n            `/ExportToExcel?companyId= ${companyId}&employeeId=${employeeId}&fromYear=${fromYear}&toYear=${toYear}&fromMonth=${fromMonth}&toMonth=${toMonth}`, { responseType: 'blob' })\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    getLeaveTransaction(id) {\r\n        return this.http\r\n            .get(this.url + '/GetLeaveTransaction?id=' + id)\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    getPrevWorkingday(employeeId, date) {\r\n        return this.http\r\n            .get(this.url + `/GetPrevWorkingday?employeeId=${employeeId}&toDate=${date}`)\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    getNextWorkingday(employeeId, date, leaveId) {\r\n        return this.http\r\n            .get(this.url + `/GetNextWorkingday?employeeId=${employeeId}&toDate=${date}&leaveId=${leaveId}`)\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    getEmployeeLeaveTransactionRejoin(companyId) {\r\n        return this.http\r\n            .get(this.url + '/getEmployeeLeaveTransactionRejoin?companyId=' + companyId)\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    updateLeaveTransaction(data) {\r\n        this.ngProgress.ref().start();\r\n        return this.http.put(this.url + '/PutLeaveTransaction', data, { withCredentials: true }).pipe(finalize(() => this.ngProgress.ref().complete()), catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    insertLeaveTransaction(data) {\r\n        this.ngProgress.ref().start();\r\n        return this.http.post(this.url + '/PostLeaveTransaction', data, { withCredentials: true }).pipe(finalize(() => this.ngProgress.ref().complete()), catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    getLeaveTransactionAttachment(id) {\r\n        return this.http\r\n            .get(this.url + '/GetLeaveTransactionAttachment?leaveTransactionId=' + id, { responseType: 'arraybuffer' })\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    deleteLeaveTransaction(id) {\r\n        this.ngProgress.ref().start();\r\n        return this.http\r\n            .delete(this.url + '/DeleteLeaveTransaction?id=' + id)\r\n            .pipe(finalize(() => this.ngProgress.ref().complete()));\r\n    }\r\n    getLeaveTransactionDays(employeeId, fromDate, toDate, leaveId) {\r\n        return this.http\r\n            .get(this.url +\r\n            '/GetLeaveTransactionDays?employeeId=' +\r\n            employeeId +\r\n            '&fromDate=' +\r\n            fromDate +\r\n            '&toDate=' +\r\n            toDate +\r\n            '&leaveId=' +\r\n            leaveId)\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    getLeaveTransactionGradeDays(companyId, leaveId, employeeId, year, daysCount) {\r\n        return this.http\r\n            .get(this.url +\r\n            '/GetLeaveTransactionGradeDays?companyId=' +\r\n            companyId +\r\n            '&leaveId=' +\r\n            leaveId +\r\n            '&employeeId=' +\r\n            employeeId +\r\n            '&year=' +\r\n            year +\r\n            '&daysCount=' +\r\n            daysCount)\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    checkLeaveTransaction(companyId, leaveId, employeeId, year, daysCount) {\r\n        return this.http\r\n            .get(this.url +\r\n            '/CheckLeaveTransaction?companyId=' +\r\n            companyId +\r\n            '&leaveId=' +\r\n            leaveId +\r\n            '&employeeId=' +\r\n            employeeId +\r\n            '&year=' +\r\n            year +\r\n            '&daysCount=' +\r\n            daysCount)\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    getLeaveTransactionEmployeeLeaves(employeeId, fromYear, daysCount) {\r\n        return this.http\r\n            .get(this.url +\r\n            '/GetLeaveTransactionEmployeeLeaves?employeeId=' +\r\n            employeeId +\r\n            '&fromYear=' +\r\n            fromYear +\r\n            '&daysCount=' +\r\n            daysCount)\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n    getWorkingHours(employeeId, day, hours) {\r\n        return this.http\r\n            .get(this.url + '/GetWorkingHours?employeeId=' + employeeId + '&day=' + day + '&hours=' + hours)\r\n            .pipe(catchError(this.utilityService.handleErrorPromise));\r\n    }\r\n};\r\nLeaveTransactionsService = __decorate([\r\n    Injectable(),\r\n    __metadata(\"design:paramtypes\", [HttpClient,\r\n        UtilityService,\r\n        NgProgress,\r\n        ConfigurationService])\r\n], LeaveTransactionsService);\r\nexport { LeaveTransactionsService };\r\n//# sourceMappingURL=leaveTransactions.service.js.map","map":{"version":3,"file":"leaveTransactions.service.js","sourceRoot":"","sources":["../../src/app/service/leaveTransactions.service.ts"],"names":[],"mappings":"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"}}
